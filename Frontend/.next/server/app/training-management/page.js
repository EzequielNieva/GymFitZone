(()=>{var e={};e.id=667,e.ids=[667],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},3601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(3631),r(37),r(996);var n=r(170),a=r(5002),i=r(3876),s=r.n(i),o=r(6299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["training-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3631)),"C:\\Users\\nieva\\OneDrive\\Desktop\\Proyecto-Gym\\El_Gaalpon_de_Jose\\Frontend\\src\\app\\training-management\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,37)),"C:\\Users\\nieva\\OneDrive\\Desktop\\Proyecto-Gym\\El_Gaalpon_de_Jose\\Frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\nieva\\OneDrive\\Desktop\\Proyecto-Gym\\El_Gaalpon_de_Jose\\Frontend\\src\\app\\training-management\\page.tsx"],p="/training-management/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/training-management/page",pathname:"/training-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2697:(e,t,r)=>{Promise.resolve().then(r.bind(r,4624)),Promise.resolve().then(r.bind(r,1250))},4624:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(7247),a=r(3891),i=r(3826),s=r(5223),o=r(31);let l=()=>{let e=i.Ry().shape({description:i.Z_().required("Description is required").max(255,"Description cannot exceed 255 characters"),file:i.nK().required("A file is required").test("fileSize","The file must be smaller than 200KB",e=>e&&e instanceof File&&e.size<=204800).test("fileType","Only JPG, JPEG, PNG, or WEBP files are allowed",e=>e&&e instanceof File&&["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))}),t=(0,a.TA)({initialValues:{description:"",file:null},validationSchema:e,onSubmit:async(e,{resetForm:t})=>{try{let r=await (0,s.he)(e.description);r&&await (0,s.Ix)(r.id,e.file)&&(o.Z.fire({title:"Yey!",text:"Plan created successfully!",icon:"success",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}),t())}catch(e){o.Z.fire({title:"Ups!",text:"Error when creating the plan",icon:"error",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1})}}});return n.jsx("div",{className:"bg-black text-white flex flex-col items-center",children:(0,n.jsxs)("div",{className:"w-[500px] bg-zinc-900 p-8 rounded-lg",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Create Training Plan"}),(0,n.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[n.jsx("label",{htmlFor:"description",children:"Description"}),n.jsx("input",{id:"description",name:"description",type:"text",className:"bg-zinc-950 border-b-2 border-transparent border-b-red-500 focus:outline-none focus:border-red-700 p-2",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.description}),t.touched.description&&t.errors.description?n.jsx("div",{className:"text-red-500 text-sm",children:t.errors.description}):null]}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[n.jsx("label",{htmlFor:"file",children:"Image"}),n.jsx("input",{id:"file",name:"file",type:"file",className:"bg-zinc-950 border-b-2 border-transparent border-b-red-500 focus:outline-none focus:border-red-700 p-2",onChange:e=>{t.setFieldValue("file",e.currentTarget.files[0])},onBlur:t.handleBlur}),t.touched.file&&t.errors.file?n.jsx("div",{className:"text-red-500 text-sm",children:t.errors.file}):null]}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsx("button",{type:"submit",className:"bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition",children:"Create Plan"})})]})]})})}},1250:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var n=r(7247),a=r(5223),i=r(8964),s=r(9741),o=r.n(s),l=r(31),c=r(4946);let d=()=>{let{user:e}=(0,i.useContext)(c.S),[t,r]=(0,i.useState)([]),[s,d]=(0,i.useState)(null),[p,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{u(!0);try{let e=await (0,a.pE)();r(e)}catch(e){d("Error fetching training plans")}finally{u(!1)}})()},[]);let x=async e=>{(await l.Z.fire({title:"Hey!",text:"Are you sure you want to delete this plan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none",cancelButton:"bg-gray-500 text-white hover:bg-gray-600 py-2 px-4 border-none"},buttonsStyling:!1})).isConfirmed&&await (0,a.Wb)(e)&&(r(t.filter(t=>t.id!==e)),l.Z.fire({title:"Great!",text:"The plan has been deleted successfully!",icon:"success",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}))},g=e=>{h(e)},b=()=>{h(null)};return p?n.jsx("div",{children:"Loading training plans..."}):s?n.jsx("div",{className:"text-red-500",children:s}):(0,n.jsxs)("div",{className:"min-h-screen bg-black text-white flex flex-col items-center p-6",children:[n.jsx("div",{className:"text-center mb-6",children:(0,n.jsxs)("h1",{className:"text-3xl font-extrabold",children:["My ",n.jsx("span",{className:"text-red-600",children:"Training Plans"})]})}),n.jsx("div",{className:"text-center container mx-auto p-8 bg-zinc-950 shadow-lg",children:0===t.length?n.jsx("p",{children:"No training plans available"}):n.jsx("ul",{children:t.map(t=>(0,n.jsxs)("li",{className:"bg-zinc-900 p-4 rounded-lg shadow-md mb-4 flex justify-between items-center",children:[n.jsx("h2",{className:"text-lg font-semibold",children:t.description}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[n.jsx("button",{onClick:()=>g(t.file),className:"bg-gray-700 text-white py-2 px-4 rounded hover:bg-gray-800 transition",children:"View Plan"}),e?.role==="coach"&&n.jsx("button",{onClick:()=>x(t.id),className:"bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition",children:"Delete Plan"})]})]},t.id))})}),n.jsx(o(),{isOpen:!!m,onRequestClose:b,className:"flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded",children:[m&&n.jsx("img",{src:m,alt:"Training Plan",className:"max-w-full h-auto"}),n.jsx("button",{onClick:b,className:"mt-4 bg-gray-500 text-white py-1 px-3 rounded hover:bg-gray-600",children:"Close"})]})})]})}},5223:(e,t,r)=>{"use strict";async function n(e){try{let t=localStorage.getItem("token");if(!t)throw Error("Token no disponible");let r=await fetch("http://localhost:3000/training-plans",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({description:e})});if(!r.ok){let e=await r.json();throw console.error("Server error:",e),Error(`Error: ${r.status} ${r.statusText}`)}let n=await r.json();return console.log("Server response",n),n}catch(e){return console.error("Error when creating plan",e),null}}async function a(e,t){try{let r=localStorage.getItem("token");if(!r)throw Error("Token no disponible");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type)||t.size>204800)throw Error("El archivo debe ser una imagen en formato jpg, jpeg, png o webp y menor a 200KB");let n=new FormData;n.append("file",t);let a=await fetch(`http://localhost:3000/files/uploadImage/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`},body:n});if(!a.ok){let e=await a.json();throw console.error("Server error:",e),Error(`Error: ${a.status} ${a.statusText}`)}let i=await a.json();return console.log("Server response",i),i}catch(e){return console.error("Error when uploading image",e),null}}r.d(t,{Ix:()=>a,Wb:()=>i,he:()=>n,pE:()=>s});let i=async e=>{try{let t=localStorage.getItem("token"),r=await fetch(`http://localhost:3000/training-plans/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!r.ok){let e=await r.text();throw Error(`Error: ${r.status} ${r.statusText}, Details: ${e}`)}return!0}catch(e){console.error("Error al eliminar el plan de entrenamiento:",e),alert("Error al eliminar el plan de entrenamiento")}},s=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("http://localhost:3000/training-plans",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`Error: ${t.status} ${t.statusText}`);let r=await t.json();return console.log("Training plans data:",r),r}catch(e){console.error("Error obtaining training plans:",e),alert("Error obtaining training plans")}}},3631:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(2051);let a=(0,r(5347).createProxy)(String.raw`C:\Users\nieva\OneDrive\Desktop\Proyecto-Gym\El_Gaalpon_de_Jose\Frontend\src\components\CreateTrainingPlan\CreateTrainingPlan.tsx#default`);r(6269);var i=r(4801);function s(){return(0,n.jsxs)(n.Fragment,{children:[n.jsx(a,{}),n.jsx(i.Z,{})]})}},4801:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(2051);let a=(0,r(5347).createProxy)(String.raw`C:\Users\nieva\OneDrive\Desktop\Proyecto-Gym\El_Gaalpon_de_Jose\Frontend\src\components\TrainingPlans\TrainingPlans.tsx#default`);function i(){return n.jsx(a,{})}r(6269)},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(4564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[379,568,564,106,741,763],()=>r(3601));module.exports=n})();