(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{3166:function(e,t,r){Promise.resolve().then(r.bind(r,5544))},6956:function(e,t,r){"use strict";var s=r(7437);r(2265);var o=r(9376);t.Z=e=>{let{content:t,onClick:r,redirectTo:a}=e,n=(0,o.useRouter)();return(0,s.jsx)("button",{className:"px-5 py-2 font-bold tracking-wide rounded-md bg-red-600 transition duration-300 ease-in-out hover:bg-red-700 text-sm text-white",onClick:e=>{a?n.push(a):r&&r(e)},children:t})}},2177:function(e,t,r){"use strict";r.d(t,{S:function(){return u},d:function(){return h}});var s=r(7437),o=r(9261),a=r(2265),n=r(4474),l=r(5515),c=r.n(l),i=r(9376),d=r(605);let u=(0,a.createContext)({user:null,setUser:()=>{},isLogged:!1,setIsLogged:()=>{},signIn:async()=>!1,signUp:async e=>({success:!1,errorMessage:""}),logOut:()=>{},imgUrl:null,setImgUrl:()=>{}}),h=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[h,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null);(0,i.useRouter)();let{data:f,status:p}=(0,d.useSession)();console.log("\uD83D\uDE80 ~ UserProvider ~ status:",p),console.log("\uD83D\uDE80 ~ UserProvider ~ session:",f);let b=async e=>{try{let t;if("provider"in e)return!0;{let r=await (0,o.Qd)(e);t=r?{user:r.user,token:r.token}:null}if(t&&t.token){let e=(0,n.o)(t.token),r=e.roles,s=e.id,a={...t.user,role:r,id:s,token:t.token},c=await (0,o.FQ)(s,t.token);return c&&(l({...a,...c}),x(c.imgUrl||null),localStorage.setItem("imgUrl_".concat(s),c.imgUrl||"")),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",t.token),m(!0),!0}return console.warn("No se pudo iniciar sesi\xf3n, datos no v\xe1lidos:",t),!1}catch(e){return e instanceof Error?console.error("Error durante el login:",e.message):console.error("Error inesperado durante el login:",e),!1}},w=async e=>{try{console.log("Llamando a postSignUp con:",e);let t=await (0,o.J)(e);if(console.log("Respuesta recibida en signUp:",t),t&&t.user&&t.user.id)return console.log("Usuario registrado correctamente:",t.user),await b({email:e.email,password:e.password}),x(t.user.imgUrl),{success:!0};return console.log("La respuesta no contiene el usuario o el ID:",t),{success:!1,errorMessage:"No se pudo obtener el ID del usuario."}}catch(e){return console.error("Error en signUp:",e),{success:!1,errorMessage:e instanceof Error?e.message:"Error desconocido en el registro"}}},y=async()=>{let e=null==r?void 0:r.id;e&&localStorage.removeItem("imgUrl_".concat(e)),localStorage.removeItem("user"),localStorage.removeItem("token"),c().fire({title:"Come back soon!",text:"You are logged out!",icon:"success",confirmButtonText:"Great",customClass:{popup:"bg-black text-white",title:"text-red-600",confirmButton:"bg-red-600 text-white hover:bg-red-700 py-2 px-4 border-none rounded-md"},buttonsStyling:!1}),l(null),m(!1),x(null)};return(0,a.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(e&&t){let r=JSON.parse(e);try{let e=(0,n.o)(t),s=e.roles,o=r.id,a=localStorage.getItem("imgUrl_".concat(o));l({...r,role:s,id:e.id}),x(a||null),m(!0)}catch(e){console.warn("Error al decodificar el token:",e)}}},[]),(0,s.jsx)(u.Provider,{value:{user:r,setUser:l,isLogged:h,setIsLogged:m,signIn:b,signUp:w,logOut:y,imgUrl:g,setImgUrl:x},children:t})}},4308:function(e,t,r){"use strict";r.d(t,{VG:function(){return s},mv:function(){return o},wC:function(){return a}});let s=async()=>{try{let e=await fetch("http://localhost:3000/class",{method:"GET"});if(!e.ok)throw Error("Error: ".concat(e.status," ").concat(e.statusText));let t=await e.json();return console.log("Class data:",t),t}catch(e){console.error("Error fetching class data:",e)}},o=async e=>{try{let t=await fetch("http://localhost:3000/class",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Error: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Error al crear la clase:",e),e}};async function a(e){try{let t=await fetch("http://localhost:3000/classRegistration/user/".concat(e));if(!t.ok)throw Error("Error en la solicitud: ".concat(t.status));return await t.json()}catch(e){return console.error("Error al obtener el registro de clases:",e),null}}},9261:function(e,t,r){"use strict";async function s(e){try{if(!e.email||!e.password)return console.error("Email y contrase\xf1a son obligatorios"),null;let t=await fetch("http://localhost:3000/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.error("Error del servidor:",e),Error("Error: ".concat(t.status," ").concat(t.statusText))}return await t.json()}catch(e){return e instanceof Error?console.error("Error durante la solicitud de inicio de sesi\xf3n:",e.message):console.error("Error inesperado:",e),null}}async function o(e){try{console.log("Iniciando la solicitud de registro al backend");let t=await fetch("http://localhost:3000/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.error("Error del servidor:",e),Error("Error: ".concat(t.status," ").concat(t.statusText))}let r=await t.json();return console.log("Respuesta del servidor:",r),r}catch(e){return console.error("Error durante el registro:",e),null}}r.d(t,{FQ:function(){return l},J:function(){return o},Qd:function(){return s},Rf:function(){return a},wc:function(){return n}});let a=async()=>{let e=localStorage.getItem("token"),t=await fetch("http://localhost:3000/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.json();throw Error("HTTP error! Status: ".concat(t.status,", Message: ").concat(e.message))}return await t.json()},n=async(e,t)=>{let r=localStorage.getItem("token");if(!r)throw Error("Token no encontrado");let s=await fetch("http://localhost:3000/users/changeRole/".concat(e,"?role=").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});if(!s.ok)throw Error((await s.json()).message||"Error desconocido al cambiar el rol");return await s.json()},l=async(e,t)=>{try{let r=await fetch("http://localhost:3000/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok)return await r.json();return console.error("Error fetching user data:",r.statusText),null}catch(e){return console.error("Error fetching user data:",e),null}}},5544:function(e,t,r){"use strict";r.d(t,{default:function(){return j}});var s=r(7437),o=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...h}=e;return(0,o.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:c?24*Number(a)/Number(s):a,className:n("lucide",i),...h},[...u.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,o.forwardRef)((r,s)=>{let{className:l,...i}=r;return(0,o.createElement)(c,{ref:s,iconNode:t,className:n("lucide-".concat(a(e)),l),...i})});return r.displayName="".concat(e),r},d=i("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),u=i("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),h=i("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),m=i("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),g=i("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var x=r(4308),f=r(2177),p=r(6956),b=r(5515),w=r.n(b);let y=[{id:1,src:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Top-notch equipment"},{id:2,src:"https://es.habcdn.com/photos/project/medium/sala-cardio-2519598.jpg",alt:"Cardio room"},{id:3,src:"https://www.palco23.com/files/0002017/000redaccion/fitness/technogym/technogym-remo-728-min.jpg",alt:"Weight training area"},{id:4,src:"https://antonovich-design.com/uploads/files/2023/8/2023VjFa4R9MRAc1.png",alt:"Yoga area"},{id:5,src:"https://i.pinimg.com/736x/fe/2b/d8/fe2bd8ef822cd67fc9414b3f787aabda.jpg",alt:"Locker rooms"}];var j=()=>{let{user:e}=(0,o.useContext)(f.S),[t,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(null),[l,c]=(0,o.useState)(0),[i,b]=(0,o.useState)(!1),j=async()=>{if(!a||!e){console.error("No class selected or user not logged in"),alert("Please select a class and make sure you are logged in.");return}try{let t=a.id;console.log("classId"+t);let r=e.id;console.log("userId"+r);let s=await fetch("http://localhost:3000/classRegistration/".concat(t,"/register/").concat(r),{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to reserve the class. Please try again.")}let o=await s.json();w().fire({title:"Yey!",text:"Class reserved successfully!",icon:"success",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}),console.log("Class reserved successfully:",o)}catch(e){if(e instanceof Error){let t="Error reserving the class: ".concat(e.message,"\nStack trace: ").concat(e.stack);w().fire({title:"Ups!",text:"Error reserving the class",icon:"error",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}),console.error("Error reserving the class:",t)}else"string"==typeof e?(w().fire({title:"Ups!",text:"Error reserving the class",icon:"error",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}),console.error("Error reserving the class:",e)):(alert("An unknown error occurred."),console.error("Unknown error:",e))}},v=async()=>{try{let e=await (0,x.VG)();r(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching class data:",e),r([])}};(0,o.useEffect)(()=>{v()},[]);let N=e=>{n(e)};return(0,o.useEffect)(()=>{if(i){let e=setTimeout(()=>{b(!1)},300);return()=>clearTimeout(e)}},[i]),(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"w-full max-w-4xl mb-12",children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-center mb-4",children:["Experience ",(0,s.jsx)("span",{className:"text-red-600",children:"FitZone"})]}),(0,s.jsx)("p",{className:"text-center text-gray-400 mb-6",children:"Top-notch technology and facilities"}),(0,s.jsxs)("div",{className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"flex justify-center items-center",children:(()=>{let e=[];for(let t=-1;t<=1;t++){let r=(l+t+y.length)%y.length;e.push(y[r])}return e})().map((e,t)=>(0,s.jsxs)("div",{className:"w-1/3 flex-shrink-0 px-2 transition-all duration-300 ease-in-out ".concat(1===t?"scale-100 opacity-100":"scale-75 opacity-50 blur-sm"),children:[(0,s.jsx)("img",{src:e.src,alt:e.alt,className:"w-full h-64 object-cover rounded-lg"}),1===t&&(0,s.jsx)("p",{className:"text-center mt-2 font-semibold",children:e.alt})]},e.id))}),(0,s.jsx)("button",{onClick:()=>{i||(b(!0),c(e=>(e-1+y.length)%y.length))},className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-red-600 p-2 rounded-full text-white transition-transform duration-500 hover:scale-110",disabled:i,children:(0,s.jsx)(d,{size:24})}),(0,s.jsx)("button",{onClick:()=>{i||(b(!0),c(e=>(e+1)%y.length))},className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-red-600 p-2 rounded-full text-white transition-transform duration-500 hover:scale-110",disabled:i,children:(0,s.jsx)(u,{size:24})})]})]}),(0,s.jsxs)("div",{className:"text-center mb-12",children:[" ",(0,s.jsxs)("h1",{className:"text-3xl font-extrabold",children:["Discover our ",(0,s.jsx)("span",{className:"text-red-600",children:"exclusive classes"})]})]}),(0,s.jsx)("div",{className:"container mx-auto p-4 grid grid-cols-3 gap-8",children:t.length>0?t.map(e=>(0,s.jsxs)("div",{className:"bg-zinc-900 max-w-md w-full mx-auto pt-1 pb-6 rounded-lg overflow-hidden shadow-lg cursor-pointer transform transition duration-300 hover:scale-105",onClick:()=>N(e),children:[(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-72 object-cover"}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4 text-center bg-red-600 py-2 text-white rounded-md",children:e.name}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h,{className:"w-5 h-5 mr-2 text-red-600"}),(0,s.jsx)("span",{className:"text-sm",children:"DURATION"})]}),(0,s.jsx)("span",{className:"text-sm",children:e.duration})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m,{className:"w-5 h-5 mr-2 text-red-600"}),(0,s.jsx)("span",{className:"text-sm",children:"INTENSITY"})]}),(0,s.jsx)("span",{className:"text-sm",children:e.intensity})]})]})]},e.id)):(0,s.jsx)("div",{className:"col-span-1 text-center text-gray-400",children:(0,s.jsx)("p",{children:"No hay clases disponibles en este momento."})})}),a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-6 max-w-md w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:a.name}),(0,s.jsx)("button",{onClick:()=>{n(null)},className:"text-gray-400 hover:text-white",children:(0,s.jsx)(g,{size:24})})]}),(0,s.jsx)("img",{src:a.image,alt:a.name,className:"w-full h-48 object-cover rounded-lg mb-4"}),(0,s.jsx)("p",{className:"text-gray-300 mb-4",children:a.description}),(0,s.jsxs)("p",{className:"text-gray-300 mb-4",children:["Day: ",a.day]}),(0,s.jsxs)("p",{className:"text-gray-300 mb-4",children:["Start time: ",a.starttime," ",(0,s.jsx)("br",{})," End time:"," ",a.endtime]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h,{className:"w-5 h-5 mr-2 text-red-600"}),(0,s.jsx)("span",{children:a.duration})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m,{className:"w-5 h-5 mr-2 text-red-600"}),(0,s.jsx)("span",{children:a.intensity})]})]}),(null==e?void 0:e.role)==="user"&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)(p.Z,{content:"Schedule",onClick:j})})]})})]})}}},function(e){e.O(0,[461,598,971,117,744],function(){return e(e.s=3166)}),_N_E=e.O()}]);