(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{2036:function(e,t,r){Promise.resolve().then(r.bind(r,1120))},1120:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var n=r(7437),a=r(2265),s=r(1273);async function c(){try{let e=await fetch("http://localhost:3000/membresia");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();return console.log(t),t}catch(e){console.error("Error fetching membresia:",e)}}var l=r(2177),o=r(5515),i=r.n(o),d=r(9376);let u=e=>{let{plan:t,price:r,currency:c,description:o,benefits:u,idealFor:p,planId:h}=e,{user:x}=(0,a.useContext)(l.S),m=(0,d.useRouter)(),f=async()=>{if(!x){i().fire({title:"Hey!",text:"You have to be logged in to make a purchase.",icon:"warning",customClass:{popup:"bg-[#222222] text-white",title:"text-[#B0E9FF]",confirmButton:"bg-[#B0E9FF] text-[#222222] hover:bg-[#6aa4bb] py-2 px-4 border-none"},buttonsStyling:!1}),m.push("/login");return}if(!(null==x?void 0:x.id)||!t||!r||!c||!h){console.error("Faltan datos para crear la preferencia.");return}let e={title:t,quantity:1,currency_id:c,unit_price:Number(r)};console.log(e);try{let t=await fetch("http://localhost:3000/mercadopago/create_preference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Error: ".concat(t.status," ").concat(t.statusText));let r=await t.json();r.redirectUrl?window.location.href=r.redirectUrl:console.error("No se recibi\xf3 una URL de redirecci\xf3n desde Mercado Pago.")}catch(e){console.error("Error al crear la preferencia:",e)}};return(0,n.jsxs)("div",{className:"bg-zinc-900 text-white p-6 rounded-lg shadow-lg flex flex-col",children:[(0,n.jsx)("h3",{className:"text-2xl font-bold mb-4 text-center",children:t}),(0,n.jsx)("p",{className:"mb-4 text-center",children:o}),(0,n.jsx)("ul",{className:"mb-6",children:u.map((e,t)=>(0,n.jsxs)("li",{className:"flex items-center mb-2",children:[(0,n.jsx)(s.l_A,{className:"text-green-500 mr-2"}),(0,n.jsx)("span",{children:e})]},t))}),(0,n.jsx)("div",{className:"flex-grow"}),(0,n.jsxs)("p",{className:"text-xl mb-4 text-center",children:[r," ",c]}),(0,n.jsx)("button",{onClick:f,className:"bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition duration-200",children:"Get Plan"})]})};var p=()=>{let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null);return((0,a.useEffect)(()=>{c().then(e=>{console.log(e),t(e.map(e=>({planId:e.id,plan:e.plan,price:e.price,currency:e.currency||"ARS",description:e.description,benefits:e.benefits,idealFor:e.idealFor}))),s(!1)}).catch(e=>{console.error("Error fetching membership data:",e),o("Failed to load plans."),s(!1)})},[]),r)?(0,n.jsx)("div",{className:"text-white",children:"Loading plans..."}):l?(0,n.jsx)("div",{className:"text-red-500",children:l}):(0,n.jsxs)("div",{className:"min-h-screen bg-black text-white flex flex-col items-center",children:[(0,n.jsxs)("h2",{className:"text-4xl font-extrabold mb-8",children:["Check out our ",(0,n.jsx)("span",{className:"text-red-600",children:"plans"})]}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-8 px-8 max-w-7xl",children:e.map((e,t)=>(0,n.jsx)(u,{planId:e.planId,plan:e.plan,price:e.price,currency:e.currency,description:e.description,benefits:e.benefits,idealFor:e.idealFor},t))})]})}}},function(e){e.O(0,[461,240,598,684,971,117,744],function(){return e(e.s=2036)}),_N_E=e.O()}]);